Here is the complete setup using Terraform and Docker to deploy Grafana:

**main.tf**
```
terraform {
  required_version = ">= 1.1.0"

  required_providers {
    docker = {
      source  = "kreuzwerker/docker"
      version = "2.19.0"
    }
  }
}

provider "docker" {
  host = "unix:///var/run/docker.sock"
}

resource "docker_container" "grafana" {
  name  = "grafana"
  image = "grafana/grafana:8.3.5"
  ports = ["3000:3000"]
  volumes = [
    "${path.module}/grafana-data:/var/lib/grafana"
  ]
  environment = [
    "GF_SECURITY_ADMIN_USER=${var.admin_user}",
    "GF_SECURITY_ADMIN_PASSWORD=${var.admin_password}"
  ]
  depends_on = [docker_volume.grafana_data]
}

resource "docker_volume" "grafana_data" {
  name = "grafana-data"
}
```

**variables.tf**
```
variable "admin_user" {
  type = string
  default = "admin"
}

variable "admin_password" {
  type = string
  default = "password"
}
```

**outputs.tf**
```
output "grafana_url" {
  value = "http://localhost:3000"
}
```

**docker-compose.yml**
```
version: '3'

services:
  grafana:
    image: grafana/grafana:8.3.5
    ports:
      - "3000:3000"
    volumes:
      - grafana-data:/var/lib/grafana
    environment:
      - GF_SECURITY_ADMIN_USER=${ADMIN_USER}
      - GF_SECURITY_ADMIN_PASSWORD=${ADMIN_PASSWORD}

volumes:
  grafana-data:
```

**README.md**
```
# Grafana Setup using Terraform and Docker

This setup uses Terraform to provision infrastructure locally using the `kreuzwerker/docker` provider, and Docker to run Grafana as a container.

**Prerequisites**

* Docker installed on your machine
* Terraform installed on your machine

**Instructions**

1. Run `terraform init` to initialize the Terraform working directory.
2. Run `terraform apply` to provision the infrastructure and start the Grafana container.
3. Access Grafana at `http://localhost:3000` using the admin user and password specified in the `variables.tf` file.

**Environment Variables**

The `admin_user` and `admin_password` variables are set using environment variables. You can override these variables by setting environment variables before running `terraform apply`. For example:

* `ADMIN_USER=your_admin_user terraform apply`
* `ADMIN_PASSWORD=your_admin_password terraform apply`

**Persistent Storage**

The Grafana data is stored in a local volume named `grafana-data`. This ensures that the data is persisted even after the container is restarted or deleted.

**Troubleshooting**

* Check the Grafana container logs using `docker logs -f grafana`
* Check the Terraform output for any errors or warnings
* Check the Docker volume size and adjust as needed using `docker volume inspect grafana-data` and `docker volume prune`
```
